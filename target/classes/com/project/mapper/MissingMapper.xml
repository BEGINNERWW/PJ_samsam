<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.mapper.MissingMapper">
	
	<select id="list" resultType="MissingVO">
		SELECT * FROM payang ORDER BY p_no DESC , p_date DESC
	</select>
	
	<insert id="create" parameterType="MissingVO">
		<selectKey keyProperty="m_no" resultType="int" order="BEFORE">
			SELECT MISSING_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO MISSING(
			m_no, 
			m_email, 
			m_nick,
			m_name,
			m_gender,
			m_big_name,
			m_kind,
			m_age,
			m_sido,
			m_sigungu,
			m_address,
			m_subject,
			m_content,
			m_date;,
			m_upd_date
		)
		VALUES (
			#{m_no}, 
			#{m_email}, 
			#{m_nick},
			#{m_name},
			#{m_gender},
			#{m_big_name},
			#{m_kind},
			#{m_age},
			#{m_sido},
			#{m_sigungu},
			#{m_address},
			#{m_subject},
			#{m_content},
			sysdate,
			sysdate
		)
	</insert>
	
	<select id="read" resultType="MissingVO">
		SELECT * FROM MISSING WHERE M_NO = #{M_NO}
	</select>
	
	<update id="update" parameterType="MissingVO">
		UPDATE MISSING SET
		M_SUBJECT = #{M_SUBJECT},
		M_NAME = #{M_NAME},
		M_GENDER = #{M_GENDER},
		M_BIG_NAME = #{M_BIG_NAME},
		M_KIND = #{M_KIND},
		M_AGE = #{M_AGE},
		M_SIDO = #{M_SIDO},
		M_SIGUNGU = #{M_SIGUNGU},
		M_ADDRESS = #{M_ADDRESS},
		M_CONTENT = #{M_CONTENT}
		WHERE M_NO = #{M_NO}
	</update>
	
	<delete id="delete">
		DELETE FROM MISSING WHERE M_NO={#M_NO}	
	</delete>
</mapper>